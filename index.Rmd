---
title: "Dashboard"
output: 
  flexdashboard::flex_dashboard:
    source_code: embed
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
library(dplyr)
library(ggplot2)
library(plotly)
library(plyr)
pt_data <- read.csv("https://raw.githubusercontent.com/dssg-pt/covid19pt-data/master/data.csv")
htmltools::tagList(fontawesome::fa_html_dependency())

```
```{r}
pt_data$data <- as.Date(pt_data$data,format = "%d-%m-%Y")
updated_on <- max(pt_data$data)
pt_data_total <- pt_data %>% filter(data == updated_on)

```

Summary {data-icon="ion-stats-bars"}
=====================================

Column {data-width=200}
-----------------------------------------------------------------------

### Confirmed cases {.value-box}

```{r}
valueBox(pt_data_total$confirmados,
         icon = "fas fa-plus-circle")
```

### Active cases {.value-box}

```{r}
valueBox(pt_data_total$ativos,
         icon = "fas fa-user-md")
```

### New cases {.value-box}

```{r}
valueBox(pt_data_total$confirmados_novos,
         icon = "fas fa-star-of-life")
```

### Recovered cases {.value-box}

```{r}
valueBox(pt_data_total$recuperados,
         icon = "fas fa-heartbeat")
```

### Hospitalized {.value-box}

```{r}
valueBox(pt_data_total$internados,
         icon = "fas fa-hospital")
```

### Intensive Care {.value-box}

```{r}
valueBox(pt_data_total$internados_uci,
         icon = "fas fa-procedures")
```

### Death cases {.value-box}

```{r}
valueBox(pt_data_total$obitos)
```


Column {data-width=425}
-----------------------------------------------------------------------


### Active Cases Trend

```{r}
p <- ggplot(pt_data, aes(x=data, y=ativos)) +
            geom_line()
ggplotly(p)
#plotly::plot_ly(data = pt_data,
#                x = ~ data,
#                y = ~ ativos)
```

### Hospitalized

```{r}
p <- ggplot(pt_data, aes(x=data, y=internados)) +
            geom_line()
ggplotly(p)
```

Column {data-width=425}
-----------------------------------------------------------------------

### New cases

```{r}
p <- ggplot(pt_data, aes(x=data, y=confirmados_novos)) +
            geom_line()
ggplotly(p)
```

### Intensive care

```{r}
p <- ggplot(pt_data, aes(x=data, y=internados_uci)) +
            geom_line()
ggplotly(p)
```

Map {data-icon="far fa-map"}
=====================================


a